<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="{{ page.description | default: site.description }}">
<meta property="og:title" content="{{ page.title | default: site.title }}">
<meta property="og:description" content="{{ page.description | default: site.description }}">
<meta property="og:image" content="{{ site.url }}/profile.webp">
<meta property="og:url" content="{{ site.url }}{{ page.url }}">
<meta property="og:type" content="website">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<title>{{ page.title | default: site.title }}</title>
<link rel="stylesheet" type="text/css" href="/css/main.css">
</head>
<body{% if page.body_class %} class="{{ page.body_class }}"{% endif %}>

{% include navbar.html %}

{{ content }}

{% include footer.html %}

<script>
(function() {
  function sizeScrollPanels() {
    document.querySelectorAll('.three-column').forEach(function(row) {
      var cols = row.querySelectorAll(':scope > .column');
      var panel = row.querySelector('.scroll-panel');
      if (!panel || cols.length < 3) return;

      // On mobile (stacked columns), don't constrain
      if (window.innerWidth <= 768) {
        panel.style.maxHeight = '';
        return;
      }

      // Temporarily pull side columns out of flex stretch
      // so we can measure their natural content height
      var left = cols[0];
      var right = cols[cols.length - 1];
      left.style.alignSelf = 'flex-start';
      right.style.alignSelf = 'flex-start';

      var sideHeight = Math.max(left.offsetHeight, right.offsetHeight);

      // Reset
      left.style.alignSelf = '';
      right.style.alignSelf = '';

      // Subtract the height of elements above the scroll panel in its column
      var panelCol = panel.closest('.column');
      var offset = 0;
      for (var i = 0; i < panelCol.children.length; i++) {
        if (panelCol.children[i] === panel) break;
        offset += panelCol.children[i].offsetHeight;
      }

      panel.style.maxHeight = Math.max(200, sideHeight - offset) + 'px';
    });
  }

  window.addEventListener('DOMContentLoaded', sizeScrollPanels);
  window.addEventListener('resize', sizeScrollPanels);
})();
</script>

</body>
</html>
